"use strict";(self.webpackChunkeditor_app=self.webpackChunkeditor_app||[]).push([[1691],{91691:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var l=a(9950),s=a(28429),n=a(42074),i=(a(15018),a(98361)),c=a(97937),d=a(73501),o=a(95942),r=a(89379),h=a(98341),u=a(70804),m=a(72224),f=a(52867),p=a(63551),Y=a(44414);const v=e=>{const t=(0,s.zy)();return(0,Y.jsx)(D,(0,r.A)({location:t},e))};class D extends l.Component{constructor(){super(...arguments),this.state={feed:[],wallID:null,getwallID:null,updateFeedList:[],refreshing:!0,spece:"-"},this.changeFeedsFilters=e=>{const{analyticsStatus:t}=this.props;e.length>0&&this.setState({feed:e},(()=>this.props.updateSelectedFeed(this.state.feed,t.trialAccessAPI)))}}componentDidMount(){var e,t,a;const{analyticwall:l,analyticsStatus:s}=this.props,{spece:n}=this.state;let i=[],c=0;var d,o,r,h,m;l.selectedWallFeed&&Object.keys(l.selectedWallFeed).length>0&&(l.selectedWallFeed&&(null===l||void 0===l||null===(d=l.selectedWallFeed)||void 0===d||null===(o=d.feeds)||void 0===o?void 0:o.length)>0&&(c=null===l||void 0===l||null===(r=l.selectedWallFeed)||void 0===r||null===(h=r.wall)||void 0===h?void 0:h.id,null===l||void 0===l||null===(m=l.selectedWallFeed)||void 0===m||m.feeds.map((e=>{i.push({value:e.id,label:(0,u.Ay)("".concat(e.Network.icon?(0,f.kX)(e.Network.icon):"","  ").concat((0,f.lI)(e.filterId),"  ").concat(e.name,"  ").concat(e.filterIdName?n:""," ").concat(e.filterIdName?e.filterIdName:""))})}))));(null===l||void 0===l||null===(e=l.selectedWallFeed)||void 0===e?void 0:e.wall.id)!=localStorage.getItem("wallId")&&this.props.swithcWall(),this.setState({getwallID:null===l||void 0===l||null===(t=l.selectedWallFeed)||void 0===t||null===(a=t.wall)||void 0===a?void 0:a.id}),this.setState({updateFeedList:i,wallID:c,feed:this.state.wallID!=c?i:this.state.feed},(()=>this.props.updateSelectedFeed(this.state.feed,s.trialAccessAPI)))}componentWillReceiveProps(e){const{analyticwall:t,wallRefresh:a}=e,{refreshing:l,spece:s}=this.state;let n=[],i=0;var c,d,o,r,h,m;t.selectedWallFeed&&Object.keys(t.selectedWallFeed).length>0&&(t.selectedWallFeed&&(null===t||void 0===t||null===(c=t.selectedWallFeed)||void 0===c||null===(d=c.feeds)||void 0===d?void 0:d.length)>0&&(i=null===t||void 0===t||null===(o=t.selectedWallFeed)||void 0===o||null===(r=o.wall)||void 0===r?void 0:r.id,null===t||void 0===t||null===(h=t.selectedWallFeed)||void 0===h||null===(m=h.feeds)||void 0===m||m.map((e=>{null===n||void 0===n||n.push({value:e.id,label:(0,u.Ay)("".concat(e.Network.icon?(0,f.kX)(e.Network.icon):"","  ").concat((0,f.lI)(e.filterId),"  ").concat(e.name,"  ").concat(e.filterIdName?s:""," ").concat(e.filterIdName?e.filterIdName:""))})}))));n!=this.state.updateFeedList&&a&&a.refreshing&&l?this.setState({updateFeedList:n,wallID:i,feed:n,refreshing:!1}):this.setState({updateFeedList:n,wallID:i,feed:this.state.wallID!=i?n:this.state.feed},(()=>setTimeout((()=>this.setState({refreshing:!0})),2e3)))}render(){const{updateFeedList:e,feed:t}=this.state;return(0,Y.jsx)("div",{className:"w-auto react-search-feed filter_btn_wrap",children:(0,Y.jsx)(m.A,{classNamePrefix:"check-feed",value:t,onChange:this.changeFeedsFilters,options:e})})}}const y=(0,h.Ng)((e=>({analyticwall:e.analyticwall,analyticsStatus:e.analyticsStatusD,wallRefresh:e.wallRefresh})),(e=>({activeTab:t=>e((0,p.Qe)(t)),updateSelectedFeed:(t,a)=>e((0,p.j1)(t,a)),swithcWall:()=>e((0,p.Pi)())})))((0,l.memo)(v));var g=a(32796),x=a(74283),w=a(59051),M=a.n(w),b=a(68298);const j=e=>{const t=(0,s.zy)(),a=(0,h.wA)(),{analyticwall:r,analyticsStatus:u,pageRefresh:m,analytics_status_loader:f,getactiveTab:v,analyticsRecords:D,dateFilter:w}=(0,h.d4)((e=>{let{analyticwallD:t,analyticsStatusD:a,analyticsRecords:l}=e;return{analyticwall:t,analyticsStatus:a,pageRefresh:l.page_refresh,analytics_status_loader:l.analytics_status_loader,dateFilter:l.dateFilter,getactiveTab:l.activeTab,analyticsRecords:l}}),h.bN),j=!r.selectedFeed.length||u.trialAccessAPI,N=r&&Object.keys(r).length>0?r.dateFilter:null;let F=N&&Object.keys(N).length>0&&N.startDate?N.startDate:M()().subtract(29,"days").format("DD-MM-YYYY"),I=N&&Object.keys(N).length>0&&N.endDate?N.endDate:M()().format("DD-MM-YYYY");const A=x.A.parse(t.search);A.startdate&&(F=M().unix(A.startdate).format("DD-MM-YYYY")),A.enddate&&(I=M().unix(A.enddate).format("DD-MM-YYYY"));const[S,k]=(0,l.useState)(F),[_,W]=(0,l.useState)(I),[O,R]=(0,l.useState)(M()().endOf("month").format("DD-MM-YYYY"));(0,l.useEffect)((()=>{a((0,p.Qe)(t.pathname))}),[]);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("div",{id:"sw_subheader",className:"analytics_subheader bg-white box-shadow",children:(0,Y.jsxs)("div",{className:"container-fluid f-between flex-wrap position-relative ps-0",children:[(0,Y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Y.jsx)(n.N_,{className:"btn me-3 border-end border-0 py-3 rounded-0",to:"/wall/index/".concat(localStorage.getItem("wallId")),children:(0,Y.jsx)(b.gc,{type:"regular",icon:"chevron-left"})}),(0,Y.jsxs)(i.A,{className:"sw-anlts-nav-tabs",defaultActiveKey:"/analytic/".concat(localStorage.getItem("wallId")),as:"ul",children:[(0,Y.jsx)(i.A.Item,{className:"me-2",as:"li",children:(0,Y.jsx)(n.N_,{to:"/analytic/".concat(localStorage.getItem("wallId")),className:"nav-link ".concat(t.pathname.includes(localStorage.getItem("wallId"))?"active":""),children:"Content"})}),(0,Y.jsx)(i.A.Item,{as:"li",children:(0,Y.jsx)(n.N_,{to:"/analytic/activityHub/widget",className:"nav-link ".concat(t.pathname.includes("activityHub")?"active":""),children:"Activity Hub"})})]})]}),(0,Y.jsxs)("div",{className:"d-flex justify-content-end flex-grow-1",children:[(0,Y.jsx)("div",{className:"option-list active",children:(0,Y.jsxs)("div",{className:"d-flex",children:[(0,Y.jsx)("div",{className:"ms-2",children:(0,Y.jsx)(c.A,{variant:"outline-secondary",onClick:()=>{a((0,p._c)(j))},className:"h-32px w-32px f-center",children:(0,Y.jsx)(d.A,{placement:"bottom",overlay:(0,Y.jsx)(o.A,{className:"my-custom-tooltip",children:"Reffresh"}),children:(0,Y.jsx)("span",{className:"d-flex".concat(m&&m?" fa fa-spin":""),children:(0,Y.jsx)(b.gc,{type:"solid",icon:"arrows-rotate",iconClass:"fs-6"})})})})}),e.activeTab||[3].includes(v)?null:(0,Y.jsx)("div",{className:"ms-2",children:f?(0,Y.jsx)(y,{}):null}),[3].includes(v)?null:(0,Y.jsx)("div",{className:"ms-2",children:(0,Y.jsx)(g.A,{onApply:(e,t)=>{a((0,p.j1)(D.selected_feed_data,j,{startDate:t.startDate,endDate:t.endDate})),k(t.startDate.format("DD-MM-YYYY")),W(t.endDate.format("DD-MM-YYYY"))},startDate:S,endDate:_,initialSettings:{locale:{format:"DD-MM-YYYY",separator:"-"},maxDate:O,showDropdowns:!0,startDate:S,endDate:_,ranges:{Today:[M()().format("DD-MM-YYYY"),M()().format("DD-MM-YYYY")],Yesterday:[M()().subtract(1,"days").format("DD-MM-YYYY"),M()().subtract(1,"days").format("DD-MM-YYYY")],"Last 7 Days":[M()().subtract(6,"days").format("DD-MM-YYYY"),M()().format("DD-MM-YYYY")],"Last 30 Days":[M()().subtract(29,"days").format("DD-MM-YYYY"),M()().format("DD-MM-YYYY")],"This Month":[M()().startOf("month").format("DD-MM-YYYY"),M()().endOf("month").format("DD-MM-YYYY")],"Last Month":[M()().subtract(1,"month").startOf("month").format("DD-MM-YYYY"),M()().subtract(1,"month").endOf("month").format("DD-MM-YYYY")]}},children:(0,Y.jsx)(c.A,{variant:"outline-secondary",className:"h-32px w-32px f-center",id:"reportrange",children:(0,Y.jsx)(d.A,{placement:"bottom",overlay:(0,Y.jsx)(o.A,{className:"my-custom-tooltip",children:"Date Filter"}),children:(0,Y.jsx)(b.gc,{type:"regular",icon:"calendar-range",iconClass:"fs-6"})})})})})]})}),(0,Y.jsx)("div",{className:"more-option",children:(0,Y.jsx)(c.A,{variant:"outline-secondary",className:"h-32px w-32px f-center",children:(0,Y.jsx)(b.gc,{type:"solid",icon:"ellipsis-vertical",iconClass:"fs-6"})})})]})]})})})}},15018:(e,t,a)=>{a.d(t,{i$:()=>d,oK:()=>i,sl:()=>c});a(3163);var l=a(15208),s=a(59051),n=a.n(s);a(63551);const i=e=>"https://cloud.tagbox.com/app/analytics"+e,c=e=>{try{var t=e;if(e>=1e3){for(var a=Math.floor((""+e).length/3),l="",s=2;s>=1;s--){if(((l=parseFloat((0!=a?e/Math.pow(1e3,a):e).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}l%1!=0&&(l=l.toFixed(1)),t=l+["","K","M","B","T"][a]}return t}catch(n){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)}},d=("https://".concat(l.QzM?"app":"test",".taggbox.com/display/post/update"),e=>n()(e).format("YYYY-MM-DD HH:mm:ss"))}}]);