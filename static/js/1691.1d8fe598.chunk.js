"use strict";(self.webpackChunkeditor_app=self.webpackChunkeditor_app||[]).push([[1691],{91691:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(9950),l=a(28429),n=a(42074),i=a(45276),d=a(15018),c=a(73501),r=a(95942),o=a(89379),h=a(98341),m=a(70804),u=a(72224),p=a(52867),f=a(63551),v=a(44414);const Y=e=>{const t=(0,l.zy)();return(0,v.jsx)(g,(0,o.A)({location:t},e))};class g extends s.Component{constructor(){super(...arguments),this.state={feed:[],wallID:null,getwallID:null,updateFeedList:[],refreshing:!0,spece:"-"},this.changeFeedsFilters=e=>{const{analyticsStatus:t}=this.props;e.length>0&&this.setState({feed:e},(()=>this.props.updateSelectedFeed(this.state.feed,t.trialAccessAPI)))}}componentDidMount(){var e,t,a;const{analyticwall:s,analyticsStatus:l}=this.props,{spece:n}=this.state;let i=[],d=0;var c,r,o,h,u;s.selectedWallFeed&&Object.keys(s.selectedWallFeed).length>0&&(s.selectedWallFeed&&(null===s||void 0===s||null===(c=s.selectedWallFeed)||void 0===c||null===(r=c.feeds)||void 0===r?void 0:r.length)>0&&(d=null===s||void 0===s||null===(o=s.selectedWallFeed)||void 0===o||null===(h=o.wall)||void 0===h?void 0:h.id,null===s||void 0===s||null===(u=s.selectedWallFeed)||void 0===u||u.feeds.map((e=>{i.push({value:e.id,label:(0,m.Ay)("".concat(e.Network.icon?(0,p.kX)(e.Network.icon):"","  ").concat((0,p.lI)(e.filterId),"  ").concat(e.name,"  ").concat(e.filterIdName?n:""," ").concat(e.filterIdName?e.filterIdName:""))})}))));(null===s||void 0===s||null===(e=s.selectedWallFeed)||void 0===e?void 0:e.wall.id)!=localStorage.getItem("wallId")&&this.props.swithcWall(),this.setState({getwallID:null===s||void 0===s||null===(t=s.selectedWallFeed)||void 0===t||null===(a=t.wall)||void 0===a?void 0:a.id}),this.setState({updateFeedList:i,wallID:d,feed:this.state.wallID!=d?i:this.state.feed},(()=>this.props.updateSelectedFeed(this.state.feed,l.trialAccessAPI)))}componentWillReceiveProps(e){const{analyticwall:t,wallRefresh:a}=e,{refreshing:s,spece:l}=this.state;let n=[],i=0;var d,c,r,o,h,u;t.selectedWallFeed&&Object.keys(t.selectedWallFeed).length>0&&(t.selectedWallFeed&&(null===t||void 0===t||null===(d=t.selectedWallFeed)||void 0===d||null===(c=d.feeds)||void 0===c?void 0:c.length)>0&&(i=null===t||void 0===t||null===(r=t.selectedWallFeed)||void 0===r||null===(o=r.wall)||void 0===o?void 0:o.id,null===t||void 0===t||null===(h=t.selectedWallFeed)||void 0===h||null===(u=h.feeds)||void 0===u||u.map((e=>{null===n||void 0===n||n.push({value:e.id,label:(0,m.Ay)("".concat(e.Network.icon?(0,p.kX)(e.Network.icon):"","  ").concat((0,p.lI)(e.filterId),"  ").concat(e.name,"  ").concat(e.filterIdName?l:""," ").concat(e.filterIdName?e.filterIdName:""))})}))));n!=this.state.updateFeedList&&a&&a.refreshing&&s?this.setState({updateFeedList:n,wallID:i,feed:n,refreshing:!1}):this.setState({updateFeedList:n,wallID:i,feed:this.state.wallID!=i?n:this.state.feed},(()=>setTimeout((()=>this.setState({refreshing:!0})),2e3)))}render(){const{updateFeedList:e,feed:t}=this.state;return(0,v.jsx)("div",{className:"w-auto react-search-feed filter_btn_wrap",children:(0,v.jsx)(u.A,{classNamePrefix:"check-feed",value:t,onChange:this.changeFeedsFilters,options:e})})}}const x=(0,h.Ng)((e=>({analyticwall:e.analyticwall,analyticsStatus:e.analyticsStatusD,wallRefresh:e.wallRefresh})),(e=>({activeTab:t=>e((0,f.Qe)(t)),updateSelectedFeed:(t,a)=>e((0,f.j1)(t,a)),swithcWall:()=>e((0,f.Pi)())})))((0,s.memo)(Y));var D=a(32796),y=a(74283),b=a(59051),w=a.n(b);const j=e=>{const t=(0,l.zy)(),a=(0,h.wA)(),{analyticwall:o,analyticsStatus:m,pageRefresh:u,analytics_status_loader:p,getactiveTab:Y,analyticsRecords:g,dateFilter:b}=(0,h.d4)((e=>{let{analyticwallD:t,analyticsStatusD:a,analyticsRecords:s}=e;return{analyticwall:t,analyticsStatus:a,pageRefresh:s.page_refresh,analytics_status_loader:s.analytics_status_loader,dateFilter:s.dateFilter,getactiveTab:s.activeTab,analyticsRecords:s}}),h.bN),j=!o.selectedFeed.length||m.trialAccessAPI,M=o&&Object.keys(o).length>0?o.dateFilter:null;let N=M&&Object.keys(M).length>0&&M.startDate?M.startDate:w()().subtract(29,"days").format("DD-MM-YYYY"),F=M&&Object.keys(M).length>0&&M.endDate?M.endDate:w()().format("DD-MM-YYYY");const I=y.A.parse(t.search);I.startdate&&(N=w().unix(I.startdate).format("DD-MM-YYYY")),I.enddate&&(F=w().unix(I.enddate).format("DD-MM-YYYY"));const[_,A]=(0,s.useState)(N),[k,S]=(0,s.useState)(F),[W,R]=(0,s.useState)(w()().endOf("month").format("DD-MM-YYYY"));(0,s.useEffect)((()=>{a((0,f.Qe)(t.pathname))}),[]);return(0,v.jsx)("div",{children:(0,v.jsx)("div",{id:"sw_subheader",className:"subheader analytics_subheader",children:(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsxs)("div",{className:"row align-items-center justify-content-between flex-wrap position-relative",children:[(0,v.jsx)("div",{className:"col-md-4 col-8 ps-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center flex-grow-1",children:[(0,v.jsx)("button",{type:"button",className:"btn btn-icon btn-clean btn-lg border-right btn-square back_btn me-4",style:{height:"50px"},children:(0,v.jsx)(n.N_,{to:"/wall/index/".concat(localStorage.getItem("wallId")),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",children:(0,v.jsxs)("g",{id:"Group_5147","data-name":"Group 5147",transform:"translate(-282 -85)",children:[(0,v.jsx)("rect",{id:"Rectangle_2245","data-name":"Rectangle 2245",width:"32",height:"32",transform:"translate(282 85)",fill:"none"}),(0,v.jsx)("g",{id:"_15","data-name":"15",transform:"translate(292.278 91)",children:(0,v.jsx)("path",{id:"Path_5609","data-name":"Path 5609",d:"M18.238,25.487a1.463,1.463,0,0,0,1.039-2.5l-7.755-7.74L19.277,7.5A1.469,1.469,0,0,0,17.2,5.426L8.42,14.206a1.463,1.463,0,0,0,0,2.063L17.2,25.048a1.463,1.463,0,0,0,1.039.439Z",transform:"translate(-7.994 -4.996)",fill:"#545454"})})]})})})}),(0,v.jsxs)("ul",{className:"nav sw-anlts-nav-tabs",children:[(0,v.jsx)("li",{className:"me-3",children:(0,v.jsx)(n.N_,{to:"/analytic/".concat(localStorage.getItem("wallId")),className:"nav-link ".concat(t.pathname.includes(localStorage.getItem("wallId"))?"active":""),children:"Content"})}),(0,v.jsx)("li",{className:"me-3",children:(0,v.jsx)(n.N_,{to:"/analytic/activityHub/widget",className:"nav-link ".concat(t.pathname.includes("activityHub")?"active":""),children:"Activity Hub"})})]})]})}),(0,v.jsx)("div",{className:"col-md-8 col-4",children:(0,v.jsxs)("div",{className:"d-flex justify-content-end pe-3",children:[(0,v.jsx)("div",{className:"option-list active",children:(0,v.jsxs)("div",{className:"d-flex justify-content-md-end",children:[(0,v.jsx)("div",{className:"ms-3",children:(0,v.jsx)(c.A,{placement:"bottom",overlay:(0,v.jsx)(r.A,{className:"my-custom-tooltip",children:"Reffresh"}),children:(0,v.jsx)("button",{onClick:()=>{a((0,f._c)(j))},className:"btn btn-outline-secondary py-2 px-4",type:"button",children:(0,v.jsx)("span",{className:"svg-icon svg-icon-sm svg-icon-dark-75 me-0 ".concat(u&&u?"fa fa-spin":""),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",children:(0,v.jsxs)("g",{id:"Group_4474","data-name":"Group 4474",transform:"translate(10951 -4712)",children:[(0,v.jsx)("rect",{id:"Rectangle_2094","data-name":"Rectangle 2094",width:"24",height:"24",transform:"translate(-10951 4712)",fill:"none",opacity:"0"}),(0,v.jsxs)("g",{id:"Group_1","data-name":"Group 1",transform:"translate(-10950 4715)",children:[(0,v.jsx)("path",{id:"Path_17","data-name":"Path 17",d:"M17.617,40.968a6.864,6.864,0,0,1-3.843,1.155,6.966,6.966,0,0,1-6.929-6.059H8a1.027,1.027,0,0,0,.869-.474.9.9,0,0,0,0-.967L6.656,30.974a1,1,0,0,0-.869-.474h0a1.027,1.027,0,0,0-.869.474c-.778,1.25-1.933,3.277-2.122,3.556a1.344,1.344,0,0,0-.189.566.916.916,0,0,0,.961.967H4.814a8.994,8.994,0,0,0,8.962,7.993,8.833,8.833,0,0,0,4.9-1.438.955.955,0,0,0,.283-1.344,1.02,1.02,0,0,0-1.342-.307Z",transform:"translate(-2.605 -26.138)",fill:"#545454"}),(0,v.jsx)("path",{id:"Path_18","data-name":"Path 18",d:"M42.874,19.993h-1.25A8.993,8.993,0,0,0,32.666,12a8.833,8.833,0,0,0-4.9,1.438.971.971,0,1,0,1.061,1.626,6.864,6.864,0,0,1,3.843-1.155A6.966,6.966,0,0,1,39.6,19.969H38.444a1.027,1.027,0,0,0-.869.474.9.9,0,0,0,0,.967l2.213,3.654a1,1,0,0,0,.869.474h0a1.027,1.027,0,0,0,.869-.474c.778-1.25,1.933-3.277,2.122-3.556a1.344,1.344,0,0,0,.189-.566.923.923,0,0,0-.963-.949Z",transform:"translate(-21.494 -12)",fill:"#545454"})]})]})})})})})}),e.activeTab||[3].includes(Y)?null:(0,v.jsx)("div",{className:"ms-3",children:p?(0,v.jsx)(x,{}):null}),[3].includes(Y)?null:(0,v.jsx)("div",{className:"ms-3",children:(0,v.jsx)(D.A,{onApply:(e,t)=>{a((0,f.j1)(g.selected_feed_data,j,{startDate:t.startDate,endDate:t.endDate})),A(t.startDate.format("DD-MM-YYYY")),S(t.endDate.format("DD-MM-YYYY"))},startDate:_,endDate:k,initialSettings:{locale:{format:"DD-MM-YYYY",separator:"-"},maxDate:W,showDropdowns:!0,startDate:_,endDate:k,ranges:{Today:[w()().format("DD-MM-YYYY"),w()().format("DD-MM-YYYY")],Yesterday:[w()().subtract(1,"days").format("DD-MM-YYYY"),w()().subtract(1,"days").format("DD-MM-YYYY")],"Last 7 Days":[w()().subtract(6,"days").format("DD-MM-YYYY"),w()().format("DD-MM-YYYY")],"Last 30 Days":[w()().subtract(29,"days").format("DD-MM-YYYY"),w()().format("DD-MM-YYYY")],"This Month":[w()().startOf("month").format("DD-MM-YYYY"),w()().endOf("month").format("DD-MM-YYYY")],"Last Month":[w()().subtract(1,"month").startOf("month").format("DD-MM-YYYY"),w()().subtract(1,"month").endOf("month").format("DD-MM-YYYY")]}},children:(0,v.jsx)("button",{type:"button",className:"btn btn-outline-secondary py-2 px-4 btn-icon",id:"reportrange",children:(0,v.jsx)(c.A,{placement:"bottom",overlay:(0,v.jsx)(r.A,{className:"my-custom-tooltip",children:"Date Filter"}),children:(0,v.jsx)("div",{className:"btn btn-outline-secondary py-2 px-4 btn-icon",children:(0,v.jsx)("span",{className:"svg-icon svg-icon-sm svg-icon-dark-75",children:(0,v.jsx)(i.A,{className:"h-75 align-self-end",src:(0,d.oK)("/svg/calendar-new.svg")})})})})})})})]})}),(0,v.jsx)("div",{className:"ms-3 more-option",children:(0,v.jsx)("button",{className:"btn btn-outline-secondary py-2 px-4",type:"button",children:(0,v.jsx)(i.A,{height:"16px",width:"16px",src:(0,d.oK)("/svg/more.svg")})})})]})})]})})})})}},15018:(e,t,a)=>{a.d(t,{i$:()=>c,oK:()=>i,sl:()=>d});a(3163);var s=a(15208),l=a(59051),n=a.n(l);a(63551);const i=e=>"https://cloud.tagbox.com/app/analytics"+e,d=e=>{try{var t=e;if(e>=1e3){for(var a=Math.floor((""+e).length/3),s="",l=2;l>=1;l--){if(((s=parseFloat((0!=a?e/Math.pow(1e3,a):e).toPrecision(l)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}s%1!=0&&(s=s.toFixed(1)),t=s+["","K","M","B","T"][a]}return t}catch(n){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)}},c=("https://".concat(s.QzM?"app":"test",".taggbox.com/display/post/update"),e=>n()(e).format("YYYY-MM-DD HH:mm:ss"))}}]);