"use strict";(self.webpackChunkeditor_app=self.webpackChunkeditor_app||[]).push([[1163],{61163:(e,s,i)=>{i.r(s),i.d(s,{default:()=>w});var t=i(9950),n=i(97937),r=i(80107),o=i(98341),l=i(10274),a=i(68281),d=(i(70804),i(3686)),p=i(38383),c=i(95942),h=i(52867),m=i(68298),x=i(4073),u=i(88268),g=i(19115),v=i(15903),f=i(44414);class j extends t.Component{constructor(e){super(e),this.reArrangePosts=()=>{const{newArray:e,updateOrder:s}=this.state,i=e.map((e=>e.id)),t=e.map(((e,s)=>s+1));s&&(this.setState({spinner:!0}),this.props.GET_REORDER_PIN_TO_TOP(i,t,(()=>{this.setState({spinner:!1},(()=>this.props.closeModalPop()))})))},this.onLoadData=e=>{const{pinToTop:s}=e;this.setState({items:s,newArray:s})},this.state={items:[],newArray:[],spinner:!1,updateOrder:!1},this.onDragEnd=this.onDragEnd.bind(this)}componentDidMount(){this.onLoadData(this.props)}componentDidUpdate(e){e.openpinToTopModal!==this.props.openpinToTopModal&&this.props.openpinToTopModal&&this.props.GET_PIN_TO_TOP_LIST(),e.pinToTop!==this.props.pinToTop&&this.onLoadData(this.props)}onDragEnd(e){if(!e.destination)return;const s=((e,s,i)=>{const t=Array.from(e),[n]=t.splice(s,1);return t.splice(i,0,n),t})(this.state.items,e.source.index,e.destination.index);this.setState({items:s,newArray:s,updateOrder:!0})}render(){var e;const{openpinToTopModal:s,closeModalPop:i}=this.props,{spinner:t}=this.state;return(0,f.jsxs)(r.A,{className:"pintotop_modal",size:"lg",show:s,onHide:i,centered:!0,children:[(0,f.jsx)(r.A.Header,{closeButton:!0,children:(0,f.jsx)(r.A.Title,{children:"Change Order"})}),(0,f.jsx)(r.A.Body,{children:(0,f.jsx)("div",{className:"px-3 overflow-auto",style:{height:500},children:this.state.items&&(null===(e=this.state.items)||void 0===e?void 0:e.length)>0?(0,f.jsx)(a.JY,{onDragEnd:this.onDragEnd,children:(0,f.jsx)(a.gL,{droppableId:"droppable",children:(e,s)=>(0,f.jsx)("div",{...e.droppableProps,ref:e.innerRef,style:(s.isDraggingOver,{}),children:this.state.items&&this.state.items.length&&this.state.items.map(((e,s)=>(0,f.jsx)(a.sx,{draggableId:`item-${s}`,index:s,children:(i,t)=>{var n,r,o,l,a,g;return(0,f.jsx)("div",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,style:(t.isDragging,g=i.draggableProps.style,{...g}),children:(0,f.jsx)(d.A,{"data-id":e.id,className:"mb-3",children:(0,f.jsxs)(d.A.Body,{className:"p-2",children:[(0,f.jsx)("span",{className:"position-absolute start-0 translate-middle h-18px w-18px rounded-circle f-center bg-dark text-white top-50 fs-10 fw-medium",style:{zIndex:1},children:s+1}),(0,f.jsxs)("div",{className:"d-flex flex-lg-row flex-column",children:[(0,f.jsx)("div",{className:"f-center h-100 text-gray-300 me-lg-2 mb-2 fs-6",children:(0,f.jsx)(m.gc,{type:"solid",icon:"grip-dots-vertical"})}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0 flex-column cursor-pointer pe-lg-4 mx-auto mb-lg-0 mb-3",style:{width:120},children:(0,f.jsx)(x.A,{mediaClass:"position-relative rounded-1 overflow-hidden w-100",size:100,height:120,width:120,url:e.newMedia,alt:"",isCover:!0})}),(0,f.jsxs)("div",{className:"d-flex flex-grow-1 flex-column pl-lg-5 w-100 overflow-hidden",children:[(0,f.jsxs)("div",{className:"d-flex align-items-start mb-1",children:[(0,f.jsxs)("a",{href:e.link,target:"_blank",className:"d-flex align-items-start me-2 flex-grow-1 overflow-hidden text-decoration-none text-gray-800",children:[(0,f.jsx)(u.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-5",name:null===e||void 0===e||null===(n=e.author)||void 0===n?void 0:n.username,profileUrl:null===e||void 0===e||null===(r=e.author)||void 0===r?void 0:r.picture,networkId:e.networkId}),(0,f.jsxs)("div",{className:"pe-2 w-100 overflow-hidden",children:[(0,f.jsx)("p",{className:" mb-0",children:(0,f.jsx)("strong",{className:"text-break text-ellipsis w-100 d-block",children:null===e||void 0===e||null===(o=e.author)||void 0===o?void 0:o.name})}),(0,f.jsxs)("p",{className:"mb-1 text-gray-500 text-break fs-9",children:["@",null===e||void 0===e||null===(l=e.author)||void 0===l?void 0:l.username]})]})]}),(0,f.jsx)("span",{className:"d-flex align-items-center h-20px w-20px flex-shrink-0",children:(0,f.jsx)(p.A,{placement:"top",overlay:(0,f.jsx)(c.A,{children:(0,h.Oi)(e.networkId)}),children:(0,f.jsx)(m.gc,{icon:(0,h.EC)(e.networkId),iconClass:"fs-4 fab "+(12==e.networkId?"fa-solid":"fa-brands")})})})]}),(0,f.jsx)("p",{className:"line-clamp line-clamp-3 mb-1",children:null===e||void 0===e||null===(a=e.content)||void 0===a?void 0:a.text})]})]})]})})})}},`item-${s}`)))})})}):(0,f.jsx)(v.A,{})})}),(0,f.jsxs)(r.A.Footer,{children:[(0,f.jsx)(n.A,{variant:"secondary",className:"ms-3 btn-min-w",onClick:i,children:"Cancel"}),(0,f.jsx)(n.A,{className:"ms-3 btn-min-w "+(t?"spinner":""),onClick:this.reArrangePosts,children:"Done"})]})]})}}const w=(0,o.Ng)((e=>{var s;return{pinToTop:null===(s=e.moderation)||void 0===s?void 0:s.pinToTop}}),(e=>({MOD_PIN_LIST:()=>e((0,g.SKt)()),GET_PIN_TO_TOP_LIST:()=>e((0,l.qz)()),GET_REORDER_PIN_TO_TOP:(s,i,t)=>e((0,l.Z4)(s,i,t))})))(j)}}]);