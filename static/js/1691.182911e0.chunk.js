"use strict";(self.webpackChunkeditor_app=self.webpackChunkeditor_app||[]).push([[1691],{91691:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(9950),s=a(28429),i=a(42074),d=(a(15018),a(98361)),n=a(97937),c=a(95508),r=a(95942),o=a(98341),h=a(70804),u=a(72224),m=a(52867),f=a(63551),Y=a(44414);const p=e=>{const t=(0,s.zy)();return(0,Y.jsx)(v,{location:t,...e})};class v extends l.Component{constructor(){super(...arguments),this.state={feed:[],wallID:null,getwallID:null,updateFeedList:[],refreshing:!0,spece:"-"},this.changeFeedsFilters=e=>{const{analyticsStatus:t}=this.props;e.length>0&&this.setState({feed:e},(()=>this.props.updateSelectedFeed(this.state.feed,t.trialAccessAPI)))}}componentDidMount(){var e,t,a;const{analyticwall:l,analyticsStatus:s}=this.props,{spece:i}=this.state;let d=[],n=0;var c,r,o,u,f;l.selectedWallFeed&&Object.keys(l.selectedWallFeed).length>0&&(l.selectedWallFeed&&(null===l||void 0===l||null===(c=l.selectedWallFeed)||void 0===c||null===(r=c.feeds)||void 0===r?void 0:r.length)>0&&(n=null===l||void 0===l||null===(o=l.selectedWallFeed)||void 0===o||null===(u=o.wall)||void 0===u?void 0:u.id,null===l||void 0===l||null===(f=l.selectedWallFeed)||void 0===f||f.feeds.map((e=>{d.push({value:e.id,label:(0,h.Ay)(`${e.Network.icon?(0,m.kX)(e.Network.icon):""}  ${(0,m.lI)(e.filterId)}  ${e.name}  ${e.filterIdName?i:""} ${e.filterIdName?e.filterIdName:""}`)})}))));(null===l||void 0===l||null===(e=l.selectedWallFeed)||void 0===e?void 0:e.wall.id)!=localStorage.getItem("wallId")&&this.props.swithcWall(),this.setState({getwallID:null===l||void 0===l||null===(t=l.selectedWallFeed)||void 0===t||null===(a=t.wall)||void 0===a?void 0:a.id}),this.setState({updateFeedList:d,wallID:n,feed:this.state.wallID!=n?d:this.state.feed},(()=>this.props.updateSelectedFeed(this.state.feed,s.trialAccessAPI)))}componentWillReceiveProps(e){const{analyticwall:t,wallRefresh:a}=e,{refreshing:l,spece:s}=this.state;let i=[],d=0;var n,c,r,o,u,f;t.selectedWallFeed&&Object.keys(t.selectedWallFeed).length>0&&(t.selectedWallFeed&&(null===t||void 0===t||null===(n=t.selectedWallFeed)||void 0===n||null===(c=n.feeds)||void 0===c?void 0:c.length)>0&&(d=null===t||void 0===t||null===(r=t.selectedWallFeed)||void 0===r||null===(o=r.wall)||void 0===o?void 0:o.id,null===t||void 0===t||null===(u=t.selectedWallFeed)||void 0===u||null===(f=u.feeds)||void 0===f||f.map((e=>{null===i||void 0===i||i.push({value:e.id,label:(0,h.Ay)(`${e.Network.icon?(0,m.kX)(e.Network.icon):""}  ${(0,m.lI)(e.filterId)}  ${e.name}  ${e.filterIdName?s:""} ${e.filterIdName?e.filterIdName:""}`)})}))));i!=this.state.updateFeedList&&a&&a.refreshing&&l?this.setState({updateFeedList:i,wallID:d,feed:i,refreshing:!1}):this.setState({updateFeedList:i,wallID:d,feed:this.state.wallID!=d?i:this.state.feed},(()=>setTimeout((()=>this.setState({refreshing:!0})),2e3)))}render(){const{updateFeedList:e,feed:t}=this.state;return(0,Y.jsx)("div",{className:"w-auto react-search-feed filter_btn_wrap",children:(0,Y.jsx)(u.A,{classNamePrefix:"check-feed",value:t,onChange:this.changeFeedsFilters,options:e})})}}const D=(0,o.Ng)((e=>({analyticwall:e.analyticwall,analyticsStatus:e.analyticsStatusD,wallRefresh:e.wallRefresh})),(e=>({activeTab:t=>e((0,f.Qe)(t)),updateSelectedFeed:(t,a)=>e((0,f.j1)(t,a)),swithcWall:()=>e((0,f.Pi)())})))((0,l.memo)(p));var y=a(32796),g=a(74283),x=a(59051),w=a.n(x),M=a(68298);const b=e=>{const t=(0,s.zy)(),a=(0,o.wA)(),{analyticwall:h,analyticsStatus:u,pageRefresh:m,analytics_status_loader:p,getactiveTab:v,analyticsRecords:x,dateFilter:b}=(0,o.d4)((e=>{let{analyticwallD:t,analyticsStatusD:a,analyticsRecords:l}=e;return{analyticwall:t,analyticsStatus:a,pageRefresh:l.page_refresh,analytics_status_loader:l.analytics_status_loader,dateFilter:l.dateFilter,getactiveTab:l.activeTab,analyticsRecords:l}}),o.bN),j=!h.selectedFeed.length||u.trialAccessAPI,N=h&&Object.keys(h).length>0?h.dateFilter:null;let F=N&&Object.keys(N).length>0&&N.startDate?N.startDate:w()().subtract(29,"days").format("DD-MM-YYYY"),I=N&&Object.keys(N).length>0&&N.endDate?N.endDate:w()().format("DD-MM-YYYY");const A=g.A.parse(t.search);A.startdate&&(F=w().unix(A.startdate).format("DD-MM-YYYY")),A.enddate&&(I=w().unix(A.enddate).format("DD-MM-YYYY"));const[S,k]=(0,l.useState)(F),[_,W]=(0,l.useState)(I),[$,O]=(0,l.useState)(w()().endOf("month").format("DD-MM-YYYY"));(0,l.useEffect)((()=>{a((0,f.Qe)(t.pathname))}),[]);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("div",{id:"sw_subheader",className:"analytics_subheader bg-white box-shadow",children:(0,Y.jsxs)("div",{className:"container-fluid f-between flex-wrap position-relative ps-0",children:[(0,Y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Y.jsx)(i.N_,{className:"btn me-3 border-end border-0 py-3 rounded-0",to:`/wall/index/${localStorage.getItem("wallId")}`,children:(0,Y.jsx)(M.gc,{type:"regular",icon:"chevron-left"})}),(0,Y.jsxs)(d.A,{className:"sw-anlts-nav-tabs",defaultActiveKey:`/analytic/${localStorage.getItem("wallId")}`,as:"ul",children:[(0,Y.jsx)(d.A.Item,{className:"me-2",as:"li",children:(0,Y.jsx)(i.N_,{to:`/analytic/${localStorage.getItem("wallId")}`,className:"nav-link "+(t.pathname.includes(localStorage.getItem("wallId"))?"active":""),children:"Content"})}),(0,Y.jsx)(d.A.Item,{as:"li",children:(0,Y.jsx)(i.N_,{to:"/analytic/activityHub/widget",className:"nav-link "+(t.pathname.includes("activityHub")?"active":""),children:"Activity Hub"})})]})]}),(0,Y.jsxs)("div",{className:"d-flex justify-content-end flex-grow-1",children:[(0,Y.jsx)("div",{className:"option-list active",children:(0,Y.jsxs)("div",{className:"d-flex",children:[(0,Y.jsx)("div",{className:"ms-2",children:(0,Y.jsx)(n.A,{variant:"outline-secondary",onClick:()=>{a((0,f._c)(j))},className:"h-32px w-32px f-center",children:(0,Y.jsx)(c.A,{placement:"bottom",overlay:(0,Y.jsx)(r.A,{className:"my-custom-tooltip",children:"Reffresh"}),children:(0,Y.jsx)("span",{className:"d-flex"+(m&&m?" fa fa-spin":""),children:(0,Y.jsx)(M.gc,{type:"solid",icon:"arrows-rotate",iconClass:"fs-6"})})})})}),e.activeTab||[3].includes(v)?null:(0,Y.jsx)("div",{className:"ms-2",children:p?(0,Y.jsx)(D,{}):null}),[3].includes(v)?null:(0,Y.jsx)("div",{className:"ms-2",children:(0,Y.jsx)(y.A,{onApply:(e,t)=>{a((0,f.j1)(x.selected_feed_data,j,{startDate:t.startDate,endDate:t.endDate})),k(t.startDate.format("DD-MM-YYYY")),W(t.endDate.format("DD-MM-YYYY"))},startDate:S,endDate:_,initialSettings:{locale:{format:"DD-MM-YYYY",separator:"-"},maxDate:$,showDropdowns:!0,startDate:S,endDate:_,ranges:{Today:[w()().format("DD-MM-YYYY"),w()().format("DD-MM-YYYY")],Yesterday:[w()().subtract(1,"days").format("DD-MM-YYYY"),w()().subtract(1,"days").format("DD-MM-YYYY")],"Last 7 Days":[w()().subtract(6,"days").format("DD-MM-YYYY"),w()().format("DD-MM-YYYY")],"Last 30 Days":[w()().subtract(29,"days").format("DD-MM-YYYY"),w()().format("DD-MM-YYYY")],"This Month":[w()().startOf("month").format("DD-MM-YYYY"),w()().endOf("month").format("DD-MM-YYYY")],"Last Month":[w()().subtract(1,"month").startOf("month").format("DD-MM-YYYY"),w()().subtract(1,"month").endOf("month").format("DD-MM-YYYY")]}},children:(0,Y.jsx)(n.A,{variant:"outline-secondary",className:"h-32px w-32px f-center",id:"reportrange",children:(0,Y.jsx)(c.A,{placement:"bottom",overlay:(0,Y.jsx)(r.A,{className:"my-custom-tooltip",children:"Date Filter"}),children:(0,Y.jsx)(M.gc,{type:"regular",icon:"calendar-range",iconClass:"fs-6"})})})})})]})}),(0,Y.jsx)("div",{className:"more-option",children:(0,Y.jsx)(n.A,{variant:"outline-secondary",className:"h-32px w-32px f-center",children:(0,Y.jsx)(M.gc,{type:"solid",icon:"ellipsis-vertical",iconClass:"fs-6"})})})]})]})})})}},15018:(e,t,a)=>{a.d(t,{i$:()=>n,oK:()=>i,sl:()=>d});a(3163),a(15208);var l=a(59051),s=a.n(l);a(63551);const i=e=>"https://cloud.tagbox.com/app/analytics"+e,d=e=>{try{var t=e;if(e>=1e3){for(var a=Math.floor((""+e).length/3),l="",s=2;s>=1;s--){if(((l=parseFloat((0!=a?e/Math.pow(1e3,a):e).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}l%1!=0&&(l=l.toFixed(1)),t=l+["","K","M","B","T"][a]}return t}catch(i){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)}},n=e=>s()(e).format("YYYY-MM-DD HH:mm:ss")}}]);